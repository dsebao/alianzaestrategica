"use strict";function detectDirection(){if($(".js-places-autocomplete").length>0){new AddressAutocomplete("#form-direccion",{componentRestrictions:{country:"AR"}},(function(e){$("input.lat").val(e.coordinates.lat),$("input.lng").val(e.coordinates.lng),$('input[name="ciudad"]').length>0&&$('input[name="ciudad"]').val(e.cityName),$('input[name="street"]').length>0&&$('input[name="street"]').val(e.streetName),$('input[name="streetNumber"]').length>0&&$('input[name="streetNumber"]').val(e.streetNumber),$('input[name="provincia"]').length>0&&$('input[name="provincia"]').val(e.state)}))}}function WordCount(e){return e.split(" ").length}function shortText(){$(".js-long-text").length>0&&($(".js-long-text").each((function(){var e=$(this).text();if($.trim(e).length>110){var t=e.substring(0,110),a=e.substring(110,$.trim(e).length);$(this).empty().html(t),$(this).append(' <a href="javascript:void(0);" class="js-read-more">leer m√°s...</a>'),$(this).append('<span class="js-more-text">'+a+"</span>")}})),$(".js-read-more").click((function(){$(this).siblings(".js-more-text").contents().unwrap(),$(this).remove()})))}function tagsInput(){$(".tagsinput").tagsinput({maxTags:2})}var nonce=$('meta[name="csrf-token"]').attr("content");function progressHandlingFunction(e){if(e.lengthComputable){var t=100*e.loaded/e.total;$(".progress").css({height:"3px"}),$(".progress-bar").css({width:t+"%"}),100==t&&($(".progress").css({height:"0"}),$(".progress-bar").css({width:"0%"}))}}function ajaxSend(e,t,a,n,o,s){o=o||"POST",n=n||"json",s=s||!0;$.ajax({type:o,url:jsvar.ajaxurl,dataType:n,data:e,global:s,beforeSend:function(e){t(e)},success:function(e){a(e)},error:function(e){console.log(e)}})}function ajaxSendMedia(e,t,a){$.ajax({type:"POST",url:jsvar.ajaxurl,data:e,enctype:"multipart/form-data",cache:!1,timeout:6e5,contentType:!1,processData:!1,xhr:function(){var e=$.ajaxSettings.xhr();return e.upload&&e.upload.addEventListener("progress",progressHandlingFunction,!1),e},beforeSend:function(e){a(e),$("html, body").css("cursor","wait")},success:function(e){t(e),$("html, body").css("cursor","auto")}})}function loadingAjax(){var e=$(".globalcover");$(document).ajaxStart((function(){$("html, body").css("cursor","wait"),e.fadeIn("fast")})).ajaxStop((function(){e.hide(),$("html, body").css("cursor","auto")}))}function messageDiv(e,t){notie.alert({type:e,text:t,time:100})}function mainSearchInput(){if($("body.page-template-search").length>0){var e=new URLSearchParams(window.location.search).get("tipo");"servicios"!=e&&"empresas"!=e&&"productos"!=e||$("form#mainsearch .search-panel span#search_concept").text(e)}$(".search-panel .dropdown-menu").find("a").click((function(e){e.preventDefault();var t=$(this).attr("href").replace("#",""),a=$(this).text();$(".search-panel span#search_concept").text(a),$(".input-group #main-input-search").val(t),$("form#mainsearch").submit()}))}function jsCustomAction(){$(document).on("click","*[data-action]",(function(e){e.preventDefault();var t=$(this),a=t.data("action");"js-adherirme-empresa"==a&&ajaxSend("action=userform&typeform=adherirme_empresa_form&empresa="+t.data("idempresa"),(function(e){}),(function(e){"agregado"==e.result&&(window.location.href=e.url)}));if("js-agregar-item"==a){var n=$(".js-container-item");ajaxSend("action=userform&typeform=agregar_item_empresa",(function(e){}),(function(e){console.log(e),n.append(e)}),"text")}if("js-delete-employee"==a&&confirm("Deseas eliminar este usuario?")){var o=$(this).data("meta");ajaxSend("action=userform&typeform=delete_employee&iduser="+o[0].usuario+"&empresa="+o[0].id,(function(e){}),(function(e){messageDiv(e.type,e.message),$(this).parent("tr#"+o[0].usuario).remove()}),"json")}"js-delete-item"==a&&(confirm("Deseas eliminar este item?")&&ajaxSend("action=userform&typeform=delete_item&iditem="+$(this).data("id")+"&e="+$(this).data("empresa"),(function(e){}),(function(e){"actualizado"==e.result&&(window.location.href=e.redirect),messageDiv(e.type,e.message)}),"json"));if("js-clone"==a){var s=t.data("whereclone"),i=t.data("idclone"),r=$(i).html();$(s).append(r).promise().done((function(){console.log("Exito")}))}"js-remove-clone"==a&&(i=t.data("elementremove"),t.closest(i).remove()),"js-delete-presupuesto"==a&&confirm("Deseas Eliminarlo?")&&alert("Eliminando...")}))}function formvalidations(){$("form.simpleform").submit((function(e){var t=$(this);!1===t[0].checkValidity()&&(e.preventDefault(),e.stopPropagation(),t[0].classList.add("was-validated"))}))}function ajaxForms(){$("form.js-ajaxform").submit((function(e){var t=$(this);e.preventDefault(),!1===t[0].checkValidity()?(e.preventDefault(),e.stopPropagation(),t[0].classList.add("was-validated")):ajaxSend(t.serialize(),(function(e){}),(function(e){console.log(e),"success"==e.result&&(""!=e.url&&(window.location.href=e.url),e.resetform&&t.trigger("reset")),void 0!==e.message&&messageDiv(e.type,e.message)}))})),$("form.js-ajaxform-media").submit((function(e){var t=$(this),a=new FormData(t[0]);e.preventDefault(),!1===t[0].checkValidity()?(e.preventDefault(),e.stopPropagation()):ajaxSendMedia(a,(function(e){console.log(e),e.result&&""!=e.redirect&&(window.location.href=e.redirect),void 0!==out.message&&messageDiv(out.type,out.message)}),(function(e){})),t[0].classList.add("was-validated")})),$("form.js-consultacuit").submit((function(e){var t=$(this);e.preventDefault(),!1===t[0].checkValidity()?(e.preventDefault(),e.stopPropagation(),t[0].classList.add("was-validated")):ajaxSend(t.serialize(),(function(e){}),(function(e){t.find(".js-return").html(e)}),"text")})),$("form.js-form-edit-employee").submit((function(e){var t=$(this);e.preventDefault(),!1===t[0].checkValidity()?(e.preventDefault(),e.stopPropagation(),t[0].classList.add("was-validated")):ajaxSend(t.serialize(),(function(e){}),(function(e){console.log(e),"error"!=e.result&&(window.location.href=e.redirect)}),"json")}))}function dinamicModal(){$("#employee-edit").on("show.bs.modal",(function(e){var t=$(e.relatedTarget).data("meta"),a=$(this);a.find(".modal-content input#nombre").val(t[0].nombre),a.find(".modal-content input#empresa").val(t[0].id),a.find(".modal-content input#iduser").val(t[0].usuario),a.find(".modal-content select#rol").val(t[0].rol),a.find(".modal-content select#estado").val(t[0].estado)}))}function messageCenter(){$(".js-message").length>0&&messageDiv($(".js-message").data("type"),$(".js-message").data("message"))}$.ajaxSetup({headers:{"X-CSRF-TOKEN":nonce}}),function(e){loadingAjax(),shortText(),e('input[type="file"]').change((function(t){var a=t.target.files[0].name;e(".custom-file-label").html(a)})),e("#sidebarToggle, #sidebarToggleTop").on("click",(function(t){e("body").toggleClass("sidebar-toggled"),e(".sidebar").toggleClass("toggled"),e(".sidebar").hasClass("toggled")&&e(".sidebar .collapse").collapse("hide")})),e(window).resize((function(){e(window).width()<768&&e(".sidebar .collapse").collapse("hide"),e(window).width()<480&&!e(".sidebar").hasClass("toggled")&&(e("body").addClass("sidebar-toggled"),e(".sidebar").addClass("toggled"),e(".sidebar .collapse").collapse("hide"))})),e("body.fixed-nav .sidebar").on("mousewheel DOMMouseScroll wheel",(function(t){if(e(window).width()>768){var a=t.originalEvent,n=a.wheelDelta||-a.detail;this.scrollTop+=30*(n<0?1:-1),t.preventDefault()}})),e(document).on("click","a.scroll-to-top",(function(t){var a=e(this);e("html, body").stop().animate({scrollTop:e(a.attr("href")).offset().top},1e3,"easeInOutExpo"),t.preventDefault()})),e(".customselect").select2({theme:"bootstrap4"}),formvalidations(),ajaxForms(),jsCustomAction(),detectDirection(),dinamicModal(),messageCenter(),tagsInput();e(".dataTable").DataTable();mainSearchInput()}(jQuery);